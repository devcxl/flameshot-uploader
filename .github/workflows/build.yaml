name: Build

on:
    push:
        branches:
            - master

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            -   name: Checkout Repository
                uses: actions/checkout@v2

            -   name: Set up Python
                uses: actions/setup-python@v2
                with:
                    python-version: 3.9

            -   name: Install Dependencies
                run: |
                    python -m pip install --upgrade pip
                    pip install -r requirements.txt 

            -   name: Build with PyInstaller for Linux
                run: |
                    pyinstaller --onefile --name flameshot-uploader main.py
                shell: bash

            -   name: Upload Artifact
                uses: actions/upload-artifact@v2
                with:
                    name: flameshot-uploader
                    path: dist/